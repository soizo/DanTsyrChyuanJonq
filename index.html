<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Words">
    <meta name="theme-color" content="#F5F4F0">
    <title>Dan Tsyr Chyuan Jonq</title>
    <link rel="preconnect" href="https://fontsapi.zeoseven.com" crossorigin>
    <link rel="stylesheet" href="https://fontsapi.zeoseven.com/214/main/result.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>
            <img src="assets/title.png" alt="單詞權重器">
        </h1>

        <!-- Mode Switch -->
        <div class="mode-switch">
            <label>Daily</label>
            <div class="toggle" id="modeToggle" tabindex="0">
                <div class="toggle-slider"></div>
            </div>
            <label>Full</label>
        </div>

        <!-- Status Indicator -->
        <div class="status-indicator" id="statusIndicator"></div>

        <!-- Add Word Form -->
        <div class="add-form">
            <div class="form-row">
                <label>Word</label>
                <input type="text" id="wordInput" required>
            </div>
            <div class="form-row">
                <label>Meaning</label>
                <input type="text" id="meaningInput">
            </div>
            <div class="form-grid-3">
                <div class="form-row">
                    <label>POS</label>
                    <div class="pos-selector">
                        <div class="pos-selected" id="posSelected" onclick="togglePosDropdown()">
                            <span class="pos-placeholder">Select...</span>
                        </div>
                        <div class="pos-dropdown" id="posDropdown">
                            <label class="pos-option" data-value="n" onclick="togglePosOption(this)">n.</label>
                            <label class="pos-option" data-value="v" onclick="togglePosOption(this)">v.</label>
                            <label class="pos-option" data-value="adj" onclick="togglePosOption(this)">adj.</label>
                            <label class="pos-option" data-value="adv" onclick="togglePosOption(this)">adv.</label>
                            <label class="pos-option" data-value="prep" onclick="togglePosOption(this)">prep.</label>
                            <label class="pos-option" data-value="conj" onclick="togglePosOption(this)">conj.</label>
                            <label class="pos-option" data-value="pron" onclick="togglePosOption(this)">pron.</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <label>Weight</label>
                    <div class="weight-selector">
                        <div class="weight-selected" id="weightSelected" onclick="toggleWeightDropdown()">
                            3
                        </div>
                        <div class="weight-dropdown" id="weightDropdown">
                            <label class="weight-option" data-value="5" onclick="setWeightOption(this)">5</label>
                            <label class="weight-option" data-value="4" onclick="setWeightOption(this)">4</label>
                            <label class="weight-option selected" data-value="3" onclick="setWeightOption(this)">3</label>
                            <label class="weight-option" data-value="2" onclick="setWeightOption(this)">2</label>
                            <label class="weight-option" data-value="1" onclick="setWeightOption(this)">1</label>
                            <label class="weight-option" data-value="0" onclick="setWeightOption(this)">0</label>
                            <label class="weight-option" data-value="-1" onclick="setWeightOption(this)">-1</label>
                            <label class="weight-option" data-value="-2" onclick="setWeightOption(this)">-2</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <label>Date</label>
                    <input type="date" id="dateInput">
                </div>
            </div>
            <button class="btn-primary" onclick="addWord()">Add</button>
        </div>

        <!-- Data Controls -->
        <div class="data-controls">
            <button class="btn-secondary" onclick="manualSave()">Save</button>
            <button class="btn-secondary" onclick="exportData()">Export</button>
            <button class="btn-secondary" onclick="document.getElementById('importFile').click()">Import</button>
            <button class="btn-secondary" id="batchDeleteBtn" onclick="toggleSelectMode()">Select Words</button>
            <input type="file" id="importFile" accept=".json" onchange="importData(event)">
        </div>

        <!-- Word List -->
        <div id="wordList"></div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Edit Word</div>
            <div class="form-row">
                <label>Word</label>
                <input type="text" id="editWordInput">
            </div>
            <div class="form-row">
                <label>Meaning</label>
                <input type="text" id="editMeaningInput">
            </div>
            <div class="form-grid-3">
                <div class="form-row">
                    <label>POS</label>
                    <div class="pos-selector">
                        <div class="pos-selected" id="editPosSelected" onclick="toggleEditPosDropdown()">
                            <span class="pos-placeholder">Select...</span>
                        </div>
                        <div class="pos-dropdown" id="editPosDropdown">
                            <label class="pos-option" data-value="n" onclick="toggleEditPosOption(this)">n.</label>
                            <label class="pos-option" data-value="v" onclick="toggleEditPosOption(this)">v.</label>
                            <label class="pos-option" data-value="adj" onclick="toggleEditPosOption(this)">adj.</label>
                            <label class="pos-option" data-value="adv" onclick="toggleEditPosOption(this)">adv.</label>
                            <label class="pos-option" data-value="prep" onclick="toggleEditPosOption(this)">prep.</label>
                            <label class="pos-option" data-value="conj" onclick="toggleEditPosOption(this)">conj.</label>
                            <label class="pos-option" data-value="pron" onclick="toggleEditPosOption(this)">pron.</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <label>Weight</label>
                    <div class="weight-selector">
                        <div class="weight-selected" id="editWeightSelected" onclick="toggleEditWeightDropdown()">
                            3
                        </div>
                        <div class="weight-dropdown" id="editWeightDropdown">
                            <label class="weight-option" data-value="5" onclick="setEditWeightOption(this)">5</label>
                            <label class="weight-option" data-value="4" onclick="setEditWeightOption(this)">4</label>
                            <label class="weight-option selected" data-value="3" onclick="setEditWeightOption(this)">3</label>
                            <label class="weight-option" data-value="2" onclick="setEditWeightOption(this)">2</label>
                            <label class="weight-option" data-value="1" onclick="setEditWeightOption(this)">1</label>
                            <label class="weight-option" data-value="0" onclick="setEditWeightOption(this)">0</label>
                            <label class="weight-option" data-value="-1" onclick="setEditWeightOption(this)">-1</label>
                            <label class="weight-option" data-value="-2" onclick="setEditWeightOption(this)">-2</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <label>Date</label>
                    <input type="date" id="editDateInput">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" onclick="saveEdit()">Save</button>
                <button class="btn-secondary" onclick="closeEditModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
